stages:
  - build

variables:
  IMAGE_TAG: "$CI_COMMIT_SHORT_SHA"

build-backend:
  stage: build
  image: docker:24.0.7
  services:
    - docker:24.0.7-dind
  before_script:
    - apk add --no-cache bash
  script:
    - cd CI
    - ./build_backend.sh
  rules:
    - if: $CI_COMMIT_BRANCH

build-frontend:
  stage: build
  image: node:20-alpine
  before_script:
    - apk add --no-cache bash curl unzip
  script:
    - cd CI
    - ./build_frontend.sh
  rules:
    - if: $CI_COMMIT_BRANCH

